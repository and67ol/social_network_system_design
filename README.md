# Social Network System Design
System Design социальной сети для [курса System Design](https://balun.courses/courses/system_design)

### Функциональные требования:
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

---

### Нефункциональные требования:
- DAU 10 000 000
- Сезонность
    - Новогодние праздники
    - Летние отпуска
- Платформы:
    - веб
    - мобильное приложение
- Доступность(99.99%)
- аудиторию стран СНГ
- Срок хранения данных: 10 лет
- Активность пользователей(в среднем в день)
    - создает 2 постов
    - просматривает 50 постов
    - ставит 20 реакций
    - оставляет 30 комментариев
    - подписывается на 10 человек

---

### Максимальные значения параметров системы

| Параметр                                                                    | Значение  |
|-----------------------------------------------------------------------------|-----------|
| Постов в сутки у пользователя                                               | 100       |
| Фотографий в посте                                                          | 5         |
| Размер фотографии                                                           | 1 МБ      |
| Количество символов в описании                                              | 1 000     |
| Максимальное количество подписчиков у пользователя                          | 5 000 000 |
| Количество постов у пользователя                                            | 1 000 000 |
| Максимальное количество комментариев на один пост                           | 100 000   |
| Максимальное количество комментариев на один пост в день                    | 5 000     |
| Максимальное количество реакций на один пост                                | 1 000 000 |
| Максимальное количество постов с привязкой к одному месту                   | 10 000    |
| Максимальное количество оценок, которое может поставить пользователь в день | 500       |
| Количество мест для путешествий                                             | 100 000   |
| Лента подгружается по (пагинация)                                           | 50 постов |

---

### Средний размер поста
5 фото × 1 МБ + 1 000 символов ≈ **5 МБ** (≈ 5 000 000 байт)

---

### Нагрузки

---

### Посты
| Показатель | Создание (медиа) | Создание (мета) | Просмотр (медиа) | Просмотр (мета) |
|------------|------------------|-----------------|------------------|-----------------|
| RPS        | 231              | 231             | 5 787            | 5 787           |
| Трафик     | ≈ 1.16 ГБ/с      | ≈ 0.46 МБ/с     | ≈ 6.65 ГБ/с      | ≈ 11.6 МБ/с     |

**Расчёт:**
- RPS
    - создание → `10 000 000 × 2 / 86 400 = 231`
    - просмотр → `10 000 000 × 50 / 86 400 = 5 787`
- трафик:
    - медиа создание → `231 × 5 000 000 = 1 155 000 000 байт/с ≈ 1.16 ГБ/с`
    - мета создание → `231 × 2 000 = 462 000 байт/с ≈ 0.46 МБ/с`
    - медиа просмотр → `5 787 × 1 150 000 = 6 655 050 000 байт/с ≈ 6.65 ГБ/с`
    - мета просмотр → `5 787 × 2 000 = 11 574 000 байт/с ≈ 11.6 МБ/с`

---

### Комментарии
| Показатель | Создание (мета) | Просмотр (мета) |
|------------|-----------------|-----------------|
| RPS        | 3 472           | 2 315           |
| Трафик     | ≈ 3.5 МБ/с      | ≈ 2.3 МБ/с      |

**Расчёт:**
- RPS
    - создание → `10 000 000 × 30 / 86 400 = 3 472`
    - просмотр → `10 000 000 × 20 / 86 400 = 2 315`
- трафик:
    - создание → `3 472 × 1 000 = 3 472 000 байт/с ≈ 3.5 МБ/с`
    - просмотр → `2 315 × 1 000 = 2 315 000 байт/с ≈ 2.3 МБ/с`

---

### Реакции
| Показатель | Создание (мета) | Просмотр (мета) |
|------------|-----------------|-----------------|
| RPS        | 2 315           | 2 315           |
| Трафик     | ≈ 18.5 КБ/с     | ≈ 18.5 КБ/с     |

**Расчёт:**
- RPS
    - создание → `10 000 000 × 20 / 86 400 = 2 315`
    - просмотр → `10 000 000 × 20 / 86 400 = 2 315`
- трафик:
    - создание → `2 315 × 8 = 18 520 байт/с ≈ 18.5 КБ/с`
    - просмотр → `2 315 × 8 = 18 520 байт/с ≈ 18.5 КБ/с`

---

### Подписки
| Показатель | Создание (мета) |
|------------|-----------------|
| RPS        | 1 157           |
| Трафик     | ≈ 0.46 МБ/с     |

**Расчёт:**
- RPS → `10 000 000 × 10 / 86 400 = 1 157`
- Трафик → `1 157 × 400 = 462 800 байт/с ≈ 0.46 МБ/с`

---
